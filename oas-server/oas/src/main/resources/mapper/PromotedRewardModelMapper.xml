<?xml version="1.0" encoding="UTF-8"?>
<!-- Name:NewsManage -->
<!-- Author:yangming -->
<!-- Date:2018.09.04 -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cascv.oas.server.reward.mapper.PromotedRewardModelMapper">

  <resultMap id="promotedRewardModelMap" type="com.cascv.oas.server.reward.model.PromotedRewardModel">
	<id column="promoted_id" property="promotedId" />
	<result column="reward_name" property="rewardName"/>
	<result column="frozen_ratio" property="frozenRatio"/>
	<result column="reward_ratio" property="rewardRatio"/>
  	<result column="max_promoted_grade" property="maxPromotedGrade"/>
  	<result column="created" property="created"/>
  </resultMap>
 
  <sql id="Base_Column_List">
  		promoted_id,reward_name,frozen_ratio,reward_ratio,max_promoted_grade,created
  </sql>

  <select id="selectAllPromotedRewards" resultMap="promotedRewardModelMap">
  	select 
  	<include refid="Base_Column_List" />
  	from promoted_reward_config;
  </select>
  
   <select id="selectPromotedRewardByRewardName" resultMap="promotedRewardModelMap">
select 
  	<include refid="Base_Column_List" />
from 
  	promoted_reward_config
where 
  	reward_name = #{rewardName};
  </select>

    <update id="updatePromotedReward" parameterType="com.cascv.oas.server.reward.model.PromotedRewardModel">
    update promoted_reward_config
    <trim prefix="SET" suffixOverrides=",">
      <if test="promotedId != null">
       promoted_id = #{promotedId},
      </if>
      <if test="rewardName != null">
       reward_name = #{rewardName},
      </if>
      <if test="frozenRatio != null">
       frozen_ratio = #{frozenRatio},
      </if>
      <if test="rewardRatio != null">
       reward_ratio = #{rewardRatio},
      </if>
      <if test="maxPromotedGrade != null">
       max_promoted_grade = #{maxPromotedGrade},
      </if>
      <if test="created != null">
       created = #{created},
      </if>
      </trim>
where 
		promoted_id = #{promotedId}
    </update>
    
</mapper>

