<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cascv.oas.server.user.mapper.UserRoleModelMapper">
  <resultMap id="userRoleModelMap" type="com.cascv.oas.server.user.model.UserRole">
   	<result column="role_id" property="roleId"/> 
   	<result column="role_priority" property="rolePriority"/>
   	<result column="role_name" property="roleName"/>
   	<result column="uuid" property="uuid"/>
  </resultMap>

  <select id="selectAllUserRole" resultMap="userRoleModelMap">
select 
    role_detail.role_name as role_name,
    user_role.role_priority as role_priority, 
    user_role.role_id as role_id
    from role_detail join user_role on role_detail.role_id=user_role.role_id 
    where user_role.uuid = #{uuid}
  </select>
  
  <!-- insert user_role -->
<insert id="insertUserRole" parameterType="com.cascv.oas.server.user.model.UserRole">
  	<selectKey resultType="java.lang.Integer" order="AFTER">
          SELECT LAST_INSERT_ID()
    </selectKey>
    insert into user_role(
    role_id,
    uuid,
    role_priority,
    created
    ) values (
    #{roleId,jdbcType=INTEGER},
    #{uuid,jdbcType=INTEGER},
    #{rolePriority,jdbcType=INTEGER},
    #{created,jdbcType=VARCHAR}
    )
</insert> 
</mapper>

