<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cascv.oas.server.energy.mapper.EnergyWalletMapper">

    <resultMap id="energyPonitMap" type="com.cascv.oas.server.energy.model.EnergyWallet">
        <id column="uuid" property="uuid"/>
        <result column="user_uuid" property="userUuid"/>
        <result column="point" property="point"/>
        <result column="power" property="power"/>
        <result column="created" property="created"/>
        <result column="updated" property="updated"/>
    </resultMap>

    <sql id="Base_Column_List">
      uuid, user_uuid, point, power, created, updated
    </sql>

    <!-- insert user -->
    <insert id="insertSelective" parameterType="com.cascv.oas.server.energy.model.EnergyWallet">
        insert into energy_wallet(
            uuid,
            user_uuid,
            point,
            power,
            created,
            updated
        )  values (
            #{uuid,jdbcType=VARCHAR},
            #{userUuid,jdbcType=VARCHAR},
            #{point,jdbcType=BIGINT},
            #{power,jdbcType=INTEGER},
            #{created,jdbcType=VARCHAR},
            #{updated,jdbcType=VARCHAR}
        )
    </insert>

    <insert id="insertSelectiveExceptPointPower" parameterType="com.cascv.oas.server.energy.model.EnergyWallet">
        insert into energy_wallet(
            uuid,
            user_uuid,
            created,
            updated
        )  values (
            #{uuid,jdbcType=VARCHAR},
            #{userUuid,jdbcType=VARCHAR},
            #{created,jdbcType=VARCHAR},
            #{updated,jdbcType=VARCHAR}
        )
    </insert>

    <!-- delete by uuid -->
    <delete id="deleteByUuid">
    delete from energy_wallet where uuid = #{uuid}
  </delete>

    <!-- delete by userId -->
    <delete id="deleteByUserUuid">
    delete from energy_wallet where user_uuid = #{userUuid}
  </delete>

    <select id="selectByUuid" parameterType="java.lang.String" resultMap="energyPonitMap">
        select
        <include refid="Base_Column_List"/>
        from energy_wallet where uuid = #{uuid}
    </select>

    <select id="selectByUserUuid" parameterType="java.lang.String" resultMap="energyPonitMap">
        select
        <include refid="Base_Column_List"/>
        from energy_wallet where user_uuid = #{userUuid}
    </select>

    <update id="increasePoint">
  	update energy_wallet set point=point + #{value} where uuid = #{uuid}
  </update>

    <update id="decreasePoint">
  	update energy_wallet set point=point - #{value} where uuid = #{uuid}
  </update>

    <update id="increasePower">
  	update energy_wallet set power=power + #{value} where uuid = #{uuid}
  </update>

    <update id="decreasePower">
    update energy_wallet set power=power - #{value} where uuid = #{uuid}
  </update>
</mapper>