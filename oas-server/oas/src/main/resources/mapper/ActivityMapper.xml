<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cascv.oas.server.activity.mapper.ActivityMapper">

  <resultMap id="activityMap" type="com.cascv.oas.server.activity.model.ActivityModel">
	<id column="source_code" property="sourceCode" />
	<result column="source_name" property="sourceName"/>
	<result column="type" property="type"/>
	<result column="point_single" property="pointSingle"/>
	<result column="power_single" property="powerSingle"/>
  	<result column="point_increase_speed" property="pointIncreaseSpeed"/>
  	<result column="power_increase_speed" property="powerIncreaseSpeed"/>
  	<result column="point_increase_speed_unit" property="pointIncreaseSpeedUnit"/>
  	<result column="power_increase_speed_unit" property="powerIncreaseSpeedUnit"/>
  	<result column="point_capacity_each_ball" property="pointCapacityEachBall"/>
  	<result column="power_capacity_each_ball" property="powerCapacityEachBall"/>
  	<result column="created" property="created"/>
  	<result column="updated" property="updated"/>
  </resultMap>
 
  <sql id="Base_Column_List">
  		source_code, source_name, type, point_single, power_single, point_increase_speed, power_increase_speed,
    	point_increase_speed_unit, power_increase_speed_unit, 
    	point_capacity_each_ball, power_capacity_each_ball,
    	created, updated
  </sql>
  
  <!-- insert activity -->
  <insert id="insertActivity" parameterType="com.cascv.oas.server.activity.model.ActivityModel">
    <selectKey keyProperty="sourceCode" order="AFTER" resultType="java.lang.Integer">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into activity_source
    <trim prefix="(" suffix=")" suffixOverrides=",">
      source_name, type,
      point_single, power_single,
      point_increase_speed, power_increase_speed,      
      <if test="pointIncreaseSpeedUnit != null">
        point_increase_speed_unit,
      </if>
      <if test="powerIncreaseSpeedUnit != null">
        power_increase_speed_unit,
      </if>
      point_capacity_each_ball, power_capacity_each_ball,
      <if test="created != null">
        created,
      </if>
       <if test="updated != null">
        updated
      </if>      
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
        #{sourceName,jdbcType=VARCHAR}, 
        #{type,jdbcType=VARCHAR},
        #{pointSingle,jdbcType=DECIMAL},
        #{powerSingle,jdbcType=DECIMAL},
        #{pointIncreaseSpeed,jdbcType=DECIMAL},
        #{powerIncreaseSpeed,jdbcType=DECIMAL},
        
        <if test="pointIncreaseSpeedUnit != null">
           #{pointIncreaseSpeedUnit,jdbcType=VARCHAR},
        </if>
        <if test="powerIncreaseSpeedUnit != null">
           #{powerIncreaseSpeedUnit,jdbcType=VARCHAR},
        </if>
        
        #{pointCapacityEachBall,jdbcType=DECIMAL},
        #{powerCapacityEachBall,jdbcType=DECIMAL},
      
		<if test="created != null">
	       #{created,jdbcType=VARCHAR},
	    </if>
	    <if test="updated != null">
	       #{updated,jdbcType=VARCHAR},
	    </if>
    </trim>
   </insert>
   
  <!-- select all activity -->
  <select id="selectAllActivity" resultMap="activityMap">
      select 
      <include refid="Base_Column_List" />
      from activity_source;
  </select>    
  
  <!-- update activity -->
  <update id="updateActivity" parameterType="com.cascv.oas.server.activity.model.ActivityModel">
      update activity_source
      set
          source_name = #{sourceName},
          type = #{type},
          point_single = #{pointSingle},
          power_single = #{powerSingle},
          point_increase_speed = #{pointIncreaseSpeed},
          power_increase_speed = #{powerIncreaseSpeed},
          point_increase_speed_unit = #{pointIncreaseSpeedUnit},
          power_increase_speed_unit = #{powerIncreaseSpeedUnit},
          point_capacity_each_ball = #{pointCapacityEachBall},
          power_capacity_each_ball = #{powerCapacityEachBall},
          updated = #{updated}
       where source_code = #{sourceCode}
          
  </update>
  
    
</mapper>