<!DOCTYPE html>
<html lang="zh_CN" xmlns:th="http://www.thymeleaf.org">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>新闻首页</title>
	<link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/3.3.7/css/bootstrap.min.css}">	
	<script th:src="@{/webjars/jquery/3.1.1/jquery.min.js}"></script>	
	<script th:src="@{/webjars/bootstrap/3.3.7/js/bootstrap.min.js}"></script>
	<link rel="stylesheet" href="css/index1.css"> 
	
	<style>	
	span{ 
    word-wrap:break-word;
    word-break:break-all;
    }   
	</style>

</head>

<body>
    <!-- 主内容 -->
    <div class="container">
        <h1></h1>          
                
        <div class="col-sm-1"></div>

        <div class="col-sm-10">
            <div class="new-list">                            
				<span id="Grid"></span>  				                                                 
            </div>
        </div>  
                                              
     </div>                    	              		
</body>

<script type="text/javascript">

$(function(){
	newsIndexReady();
});
	
function newsIndexReady() {
   $.ajax({
    url: "/api/v1/userCenter/selectAllNews",
    contentType : 'application/json;charset=utf8',
	dataType: 'json',
	cache: false,
	type: 'post',
    success: function(res) {
    	alert(JSON.stringify(res));
    	if(res.code==0){
    		
    		var len=res.data.length;		     
	        list="";
	        for(i=0;i<len;i++){
	        
	          list+=
	            "<div class='new-list-item clearfix'>"+
	            "<div class='col-xs-1'></div>"+
	            "<div class='col-xs-6'>"+
	            "<a href="+res.data[i].newsUrl+ " class='title'>"+res.data[i].newsTitle+"</a>"+
	              "<div class='abstract'>"+res.data[i].newsAbstract+"</div>"+
	              "</div>"+
	              "<div class='col-xs-4'>"+
	              						"<img  src="+res.data[i].newsPicturePath+ ">"+
	                                "</div></div>";
	    }		     		      
	    document.getElementById("Grid").innerHTML=list;
    	}else{
    		alert("数据库中无更多新闻！");  //数据库为空返回code:10001
    	}	    	
    }, 
    error: function(){
    	alert("新闻首页回显失败！");
    }}); 
}
	
</script>
</html>
